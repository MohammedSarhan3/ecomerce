{% extends "main.html" %}
{% load static %}
{% block body %}

<div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      
      <div class="carousel-item active" data-bs-interval="2000">
        <img src="{% static 'images/9.jpg'%}" class="d-block " alt="..." style="opacity: .6;">
       
      </div>
      <div class="carousel-item" data-bs-interval="2000">
        <img src="{% static 'images/photo_1_2023-12-16_12-36-30.jpg'%}" class="d-block " alt="..."style="opacity: .6;">
        
      </div>
      <div class="carousel-item" data-bs-interval="2000">
        <img src="{% static 'images/photo_9_2023-12-16_12-36-30.jpg'%}" class="d-block " alt="..."style="opacity: .6;">
        
      </div>
      
    </div>
    <div class="carousel-caption d-none d-md-block" style="animation-name: fadeIn;">
      <h5 style="animation-delay: 0.5s;animation-name: fadeIn;">مرحبًا بك في متجر</h5>
      <p style="animation-delay: 1s;animation-name: fadeIn;">       كلية الإقتصاد المنزلي جامعة العريش   </p>
      {% if user.is_authenticated %}
      <h5 >   </h5>

      {% else %}

      <div class="button-container" style="animation-delay: 1.1s;animation-name: fadeIn;">
        <button class="btn btn-primary" style="animation-delay: 1.1s;animation-name: fadeIn;">تسجيل الدخول</button>
        <button class="btn btn-secondary" style="animation-delay: 1.1s;animation-name: fadeIn;">حساب جديد</button>
      </div>
      {% endif %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class=" carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide=" next">
      <span class=" carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden"> Next</span>
    </button>
   
  </div>
  
  
  <style>
      .alert-success {
    background-color: #dff0d8; /* Light green background color */
    color: #3c763d; /* Dark green text color */
    padding: 10px;
    border: 1px solid #d6e9c6; /* Light green border */
    border-radius: 5px;
    width: 280px;
    text-align: center;
}
 </style>
  
  
  
  
  
  <div id="projectFacts" class="sectionClass">
    <div class="fullWidth eight columns">
        <div class="projectFactsWrap ">
            <div class="item wow fadeInUpBig animated animated" data-number="4596" style="visibility: visible;">
              <i class="fa-solid fa-person-circle-check"></i>
                <p id="number1" class="number">4596</p>
                <span></span>
                <p>  الزوار</p>
            </div>
            <div class="item wow fadeInUpBig animated animated" data-number="1250" style="visibility: visible;">
              <i class="fa-brands fa-shopify"></i>
                <p id="number2" class="number">1250</p>
                <span></span>
                <p>  المنتجات</p>
            </div>
            <div class="item wow fadeInUpBig animated animated" data-number="2600" style="visibility: visible;">
              <i class="fa-solid fa-truck-fast"></i>              <p id="number3" class="number">2600</p>
                <span></span>
                <p> الطلبات </p>
            </div>
            <div class="item wow fadeInUpBig animated animated" data-number="16" style="visibility: visible;">
              <i class="fa-solid fa-camera-retro"></i>
                 <p id="number4" class="number">16</p>
                <span></span>
                <p>الاقسام </p>
            </div>
        </div>
    </div>
  </div>
    <h1 style="text-align: right; display: block; margin-right: 50px; ">مُقترحة لك </h1>
  
  
  <div class="container" style="max-width: 100em;
  
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-content: flex-start;
  margin: auto;
  min-height: 50em;
  padding: 3em 1em 1em 1em;
  box-sizing: border-box;
  ">
  {% for product in products|slice:":50" %}
  <div class="card-1 card-div">
    <div class="gow-img-div img-div" style="position: relative;">
      <span style="position: absolute; top: -10px; right: 80%; color: white; padding: 2px 5px;">
        <img src="{% static 'images/download.png' %}" style="height: 30px; width: 60px;" alt="">
      </span>
      <img src="{{ product.product_image_set.first.Image.url }}" alt="{{ product.Product_name }} Image">
  </div>
    <div class="text-container" style="padding-top: 150px;">
      <a href="{% url 'product_detail' pk=product.pk %}" style="text-decoration: none;"><h2 class="item-name">{{ product.Product_name }}</h2></a>
      <p class="date">{{ product.Category.Name }}</p>
      <div class="pricing-and-cart">
        <div class="pricing">
          <p class="previous-price"> {{ product.discounted_price }}</p>
          <p class="current-price">{{ product.price }}LE</p>
        </div>
        <a href="#" class="add-to-cart" data-product-id="{{ product.pk }}">
          <i class="fas fa-shopping-cart"></i>
      </a>

      
            </div>

    </div>

  </div>

{% endfor %}
  
  
  
  </div>
  
  
  
  
  <div class="pb-5">
  <div class="container py-5">
  <h3 class="h3 fw-bold mb-3   mb-3"> مقالات</h3>
  <div class="row mt-md-5">
  
  <div class="col-sm-6 col-md-6 col-lg-3">
    <img class="bg rounded" src="{% static 'images/photo_2023-12-16_12-35-35.jpg'%}" width="250" height="200" > </img>
    <div class="mt-3">
      <a href="#"  class="fw-bold">   التطريز اليدوي</a>
      <p class="text-muted">التطريز اليدوي هو فن تزيين القماش أو النسيج بواسطة الخيوط والإبرة. يُعتبر التطريز اليدوي.......</p>
      <p class="text-muted" style="font-weight: bold;">كتابة/ د.محمد وائل</p>
  
    </div>
  </div><!--col div -->
  
   <div class="col-sm-6 col-md-6 col-lg-3">
    <img class="bg rounded" src="{% static 'images/photo_11_2023-12-16_12-36-30.jpg'%}" width="250" height="200">  </img>
    <div class="mt-3">
      <a href="#" class="fw-bold">   الجلود وكيفية معالجتها</a>
      <p class="text-muted">معالجة الجلود تعتمد على نوع الجلد والمشكلة المحددة التي تعاني منها. هنا بعض النصائح العامة لل.....
  
      </p>
      <p class="text-muted" style="font-weight: bold;">كتابة/ د.محمد وائل</p>
  
    </div>
  </div><!--col div -->
  
   <div class="col-sm-6 col-md-6 col-lg-3">
    <img class="bg rounded" src="{% static 'images/photo_12_2023-12-16_12-36-30.jpg'%} " width="250" height="200" > </img>
    <div class="mt-3">
      <a href="#" class="fw-bold">كيف تحافظ علي نظامك الغذائي   </a>
      <p class="text-muted">الحفاظ على نظام غذائي صحي يلعب دورًا مهمًا في الحفاظ على صحة الج........</p>
      <p class="text-muted" style="font-weight: bold;">كتابة/ د.محمد وائل</p>
  
    </div>
  </div><!--col div -->
  
   <div class="col-sm-6 col-md-6 col-lg-3">
    <img class="bg rounded" src="{% static 'images/photo_7_2023-12-16_12-36-30.jpg'%}" width="250" height="200" > </img>
    <div class="mt-3">
      <a href="#" class="fw-bold">  الثوب البدوي .. ثقافة وحضارة </a>
      <p class="text-muted">الثوب البدوي يمثل ثقافة وحضارة الشعوب البدوية التي تعيش في المناطق الصحراوية والري......
  
      </p>
      <p class="text-muted" style="font-weight: bold;">كتابة/ د.محمد وائل</p>
  
    </div>
  </div><!--col div -->
  
  </div><!-- div row -->
  
  </div>
  </div>

  <div style="margin-bottom: 70px; display: flex; flex-direction: column; align-items: center;">
    <h1 style="text-align: center;">وإن تحريرها كلها ممكن وإن تحريرها كلها قد بدأ</h1>
    <img src="{% static 'images/48.jpeg' %} " style="height: 170px;" alt="">
  
  </div>
  <script>
    $(document).ready(function () {
        $('.add-to-cart').on('click', function (event) {
            event.preventDefault(); // Prevent the default behavior (following the link)
    
            var productId = $(this).data('product-id');
            var clickedButton = $(this); // Store the clicked button
    
            $.ajax({
                type: 'POST',
                url: '{% url "add_to_cart" product_id=0 %}'.replace('0', productId),
                data: {
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response) {
                    // Check if the response contains a success message
                    if (response.message) {
                        // Get the parent card container using the stored variable
                        var cardContainer = clickedButton.closest('.card-1');

                        // Insert the success message inside the card
                        cardContainer.append('<div class="alert alert-success">' + response.message + '</div>');

                        // You can also use fade effects or other animations
                        cardContainer.find('.alert-success').fadeIn().delay(3000).fadeOut();
                    }
    
                    // Update the cart icon or handle any other response
                },
                error: function (error) {
                    console.log('Error:', error);
                }
            });
        });
    });
</script>


    
    <!-- Add this container to your HTML where you want the success message to appear -->
    
    
    
{% endblock body %}